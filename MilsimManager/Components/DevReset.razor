@inject NavigationManager NavigationManager
@inject IDevService DevService

<MudButton Variant="Variant.Filled"
           Color="Color.Warning"
           StartIcon="@Icons.Material.Filled.RestartAlt"
           Disabled="_resetting"
           OnClick="@ResetDb"
           FullWidth="true">
    @_buttonText
</MudButton>

@code {
    private bool _resetting;
    private string _buttonText = "Reset Dev Database";

    private async Task ResetDb() {
        _resetting = true;
        _buttonText = "Resetting...";
        try {
            await DevService.ResetAsync();
            _buttonText = "Reset done!";
            NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        } catch {
            _buttonText = "Reset failed";
            throw;
        } finally {
            _resetting = false;
        }
    }

}
